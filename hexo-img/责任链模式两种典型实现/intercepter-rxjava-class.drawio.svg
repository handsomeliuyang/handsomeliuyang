<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="838" height="366" viewBox="-0.5 -0.5 838 366" style="background-color:#f1faee"><path d="M153 315l190.09-62.58" fill="none" stroke="#457b9d" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M355.44 248.35l-10.32 10.24-4.06-12.35z" fill="none" stroke="#457b9d" stroke-miterlimit="10" pointer-events="all"/><path d="M0 0h100v6L90 21H0z" fill="#eee" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M100 0h737v365H0V21" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe center;justify-content:unsafe center;width:98px;height:1px;padding-top:11px;margin-left:1px" display="flex"><div style="box-sizing:border-box;text-align:center" font-size="0"><div style="line-height:1.2;white-space:normal;word-wrap:normal" display="inline-block" font-size="12" font-family="Helvetica" color="#000" pointer-events="all">class strategy</div></div></div></foreignObject><text x="50" y="14" font-family="Helvetica" font-size="12" text-anchor="middle">class strategy</text></switch><path fill="#fc9" stroke="#994c00" pointer-events="all" d="M499 123h210v64H499z"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe flex-start;justify-content:unsafe flex-start;width:212px;height:64px;padding-top:123px;margin-left:499px" display="flex"><div style="box-sizing:border-box;text-align:left;width:212px;height:64px" font-size="0" overflow="hidden"><div style="line-height:1.2;width:100%;height:100%;white-space:nowrap" display="inline-block" font-size="12" font-family="Helvetica" color="#000" pointer-events="all"><p style="margin:4px 0 0;text-align:center"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interceptor</b></p><hr size="1"/><p style="margin:0 0 0 4px"><span>+</span>intercept<span>(chain, request): Response</span><br/></p></div></div></div></foreignObject><text x="499" y="135" font-family="Helvetica" font-size="12">&lt;&lt;Interface&gt;&gt;...</text></switch><path fill="#fc9" stroke="#994c00" pointer-events="all" d="M393.25 267.5h210v54h-210z"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe flex-start;justify-content:unsafe flex-start;width:212px;height:54px;padding-top:268px;margin-left:393px" display="flex"><div style="box-sizing:border-box;text-align:left;width:212px;height:54px" font-size="0" overflow="hidden"><div style="line-height:1.2;width:100%;height:100%;white-space:nowrap" display="inline-block" font-size="12" font-family="Helvetica" color="#000" pointer-events="all"><p style="margin:4px 0 0;text-align:center"><b>InterceptorA</b></p><hr size="1"/><p style="margin:0 0 0 4px">+ intercept(chain, request): Response<br/></p></div></div></div></foreignObject><text x="393" y="280" font-family="Helvetica" font-size="12">InterceptorA...</text></switch><path fill="#fc9" stroke="#994c00" pointer-events="all" d="M102.25 108.5h189.5v93h-189.5z"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe flex-start;justify-content:unsafe flex-start;width:192px;height:93px;padding-top:109px;margin-left:102px" display="flex"><div style="box-sizing:border-box;text-align:left;width:192px;height:93px" font-size="0" overflow="hidden"><div style="line-height:1.2;width:100%;height:100%;white-space:nowrap" display="inline-block" font-size="12" font-family="Helvetica" color="#000" pointer-events="all"><p style="margin:4px 0 0;text-align:center"><b>InterceptorChain</b></p><hr size="1"/><p style="margin:0 0 0 4px"><span>+ interceptors: List&lt;Interceptor&gt;</span><br/></p><p style="margin:0 0 0 4px"><span>+ index: int</span></p><hr size="1"/><p style="margin:0 0 0 4px"><span>+ process(request):</span>Response<span/><br/></p></div></div></div></foreignObject><text x="102" y="121" font-family="Helvetica" font-size="12">InterceptorChain...</text></switch><path d="M197 234v-32.5" fill="none" stroke="#82b366" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M7 234h371l9 9v112H7V234z" fill="#f5f5f5" stroke="#666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M378 234v9h9z" fill-opacity=".05" pointer-events="all"/><path d="M378 234v9h9" fill="none" stroke="#666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe center;justify-content:unsafe flex-start;width:378px;height:1px;padding-top:295px;margin-left:9px" display="flex"><div style="box-sizing:border-box;text-align:left" font-size="0"><div style="line-height:1.2;white-space:normal;word-wrap:normal" display="inline-block" font-size="12" font-family="Helvetica" color="#333" pointer-events="all">if(index &gt;= interceptors.size()) {<br/>return processFinal(request);<br/>}<br/><div>// 构建下一个执行链路节点</div><div>InterceptorChain next = new InterceptorChain(interceptors, index + 1);</div><div>Interceptor interceptor = interceptors.get(index);</div><div>Response response = interceptor.intercept(next, request);</div><div>return response;</div></div></div></div></foreignObject><text x="9" y="298" fill="#333" font-family="Helvetica" font-size="12">if(index &gt;= interceptors.size()) {...</text></switch><path d="M721 267.5V238q0-10-10-10h-97q-10 0-10-10v-16.88" fill="none" stroke="#994c00" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M604 188.12l6.5 13h-13z" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="all"/><path fill="#fc9" stroke="#994c00" pointer-events="all" d="M616 267.5h210v54H616z"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe flex-start;justify-content:unsafe flex-start;width:212px;height:54px;padding-top:268px;margin-left:616px" display="flex"><div style="box-sizing:border-box;text-align:left;width:212px;height:54px" font-size="0" overflow="hidden"><div style="line-height:1.2;width:100%;height:100%;white-space:nowrap" display="inline-block" font-size="12" font-family="Helvetica" color="#000" pointer-events="all"><p style="margin:4px 0 0;text-align:center"><b>InterceptorB</b></p><hr size="1"/><p style="margin:0 0 0 4px">+ intercept(chain, request): Response<br/></p></div></div></div></foreignObject><text x="616" y="280" font-family="Helvetica" font-size="12">InterceptorB...</text></switch><path d="M499 155H317.74" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M292.74 155l12.5-7.35 12.5 7.35-12.5 7.35z" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="all"/><path fill="#fc9" stroke="#994c00" pointer-events="all" d="M112.66 12h168.69v64H112.66z"/><switch transform="translate(-.5 -.5)"><foreignObject style="text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" overflow="visible"><div xmlns="http://www.w3.org/1999/xhtml" style="align-items:unsafe flex-start;justify-content:unsafe flex-start;width:171px;height:64px;padding-top:12px;margin-left:113px" display="flex"><div style="box-sizing:border-box;text-align:left;width:171px;height:64px" font-size="0" overflow="hidden"><div style="line-height:1.2;width:100%;height:100%;white-space:nowrap" display="inline-block" font-size="12" font-family="Helvetica" color="#000" pointer-events="all"><p style="margin:4px 0 0;text-align:center"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Chain</b></p><hr size="1"/><p style="margin:0 0 0 4px"><span>+ process</span><span>(request): Response</span><br/></p></div></div></div></foreignObject><text x="113" y="24" font-family="Helvetica" font-size="12">&lt;&lt;Interface&gt;&gt;...</text></switch><path d="M197 108.5V90.12" fill="none" stroke="#b46504" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M197 77.12l6.5 13h-13z" fill="none" stroke="#b46504" stroke-miterlimit="10" pointer-events="all"/><path d="M498.25 267.5l.04-30.2q.01-10 10.01-10H594q10 0 10-10v-16.18" fill="none" stroke="#994c00" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M604 188.12l6.5 13h-13z" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="all"/><switch><a transform="translate(0 -5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>